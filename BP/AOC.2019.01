CALL S.GET.INPUT(2019,1,INPUT.LINES)

* CALCULATE PART 1
N.LINES = DCOUNT(INPUT.LINES,@FM)
TOTAL.FUEL = 0
FOR LN = 1 TO N.LINES
  MASS = INPUT.LINES<LN>
  FUEL = TRUNC(MASS / 3.0, 0) - 2
  TOTAL.FUEL += FUEL
NEXT LN
PRINT "PART 1: ":TOTAL.FUEL

* CALCULATE PART 2

TOTAL.FUEL = 0
FOR LN = 1 TO N.LINES
  MASS = INPUT.LINES<LN>
  FUEL = TRUNC(MASS / 3, 0) - 2
  TOTAL.FUEL += FUEL

* now calculate the fuel required for this fuel's mass
  THIS.FUEL = 0
  THIS.MASS = FUEL
  LOOP
    THIS.FUEL = TRUNC(THIS.MASS / 3, 0) - 2
  UNTIL THIS.FUEL < 0
    TOTAL.FUEL += THIS.FUEL
    THIS.MASS = THIS.FUEL
  REPEAT
NEXT LN
PRINT "PART 2: ":TOTAL.FUEL
